!function(e,t){"function"==typeof define&&define.amd?define([],(function(){return t()})):"object"==typeof exports?module.exports=t():e.whatInput=t()}(this,(function(){"use strict";var e,t,n=[],o=document.body,i=!1,r=null,u=["input","select","textarea"],d=o.hasAttribute("data-whatinput-formtyping"),s={keydown:"keyboard",mousedown:"mouse",mouseenter:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},a=[],c={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},p={2:"touch",3:"touch",4:"mouse"};function f(t){clearTimeout(e),y(t),i=!0,e=setTimeout((function(){i=!1}),1e3)}function w(e){i||y(e)}function y(e){var t=h(e),i=function(e){return e.target||e.srcElement}(e),f=s[e.type];"pointer"===f&&(f=function(e){return"number"==typeof e.pointerType?p[e.pointerType]:e.pointerType}(e)),r!==f&&(!d&&r&&"keyboard"===f&&"tab"!==c[t]&&u.indexOf(i.nodeName.toLowerCase())>=0||(r=f,o.setAttribute("data-whatinput",r),-1===a.indexOf(r)&&a.push(r))),"keyboard"===f&&function(e){-1===n.indexOf(c[e])&&c[e]&&n.push(c[e])}(t)}function h(e){return e.keyCode?e.keyCode:e.which}function m(e){var t=h(e),o=n.indexOf(c[t]);-1!==o&&n.splice(o,1)}return"addEventListener"in window&&Array.prototype.indexOf&&(t="mousedown",window.PointerEvent?t="pointerdown":window.MSPointerEvent&&(t="MSPointerDown"),o.addEventListener(t,w),o.addEventListener("mouseenter",w),"ontouchstart"in window&&o.addEventListener("touchstart",f),o.addEventListener("keydown",w),document.addEventListener("keyup",m)),{ask:function(){return r},keys:function(){return n},types:function(){return a},set:y}}));